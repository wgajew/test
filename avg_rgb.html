<!doctype html>
<html lang="pl">
<head>
<meta charset="utf-8">

<script>
function dajPixele(){

	var im = document.getElementById("obrazek"),
		kanwa = document.getElementById("kanwa"),
		ctx = kanwa.getContext("2d"),
		pixels_r = [],
		pixels_g = [],
		pixels_b = [];

	//rysujemy obrazek na kanwie(kontekście)
	ctx.drawImage(im, 0, 0);
	
	//zbieramy info o każdym pixelu do tablic
	for (var x = 0; x < kanwa.width; x++) {			
		for (var y = 0; y < kanwa.height; y++) {
			var c = ctx.getImageData(x, y, 1, 1).data;
			pixels_r.push(c[0]);
			pixels_g.push(c[1]);
			pixels_b.push(c[2]);
		}
	}
	
	//obliczamy średnie	
	var avg1 = pixels_r.reduce(function(p,c,i,a){return p + (c/a.length)},0);
	var avg2 = pixels_g.reduce(function(p,c,i,a){return p + (c/a.length)},0);
	var avg3 = pixels_b.reduce(function(p,c,i,a){return p + (c/a.length)},0);
	
	console.log("r: " + avg1);
	console.log("g: " + avg2);
	console.log("b: " + avg3);

}
</script>
</head>

<body>
<p>
Niee znam błędu 'The canvas has been tainted by cross-origin...', więc,
<br>
<br>
żeby szybko to obejść użyłem obrazka zakodowanego base64
</p>

<canvas id="kanwa" width="80" height="80"></canvas>
<img id="obrazek" src="data:image/jpeg;charset=utf-8;base64;, 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" onload="dajPixele()"/>
</body>
</html>
